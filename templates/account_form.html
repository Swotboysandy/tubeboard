<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>{% if account %}Edit Account{% else %}New Account{% endif %} • YouTube Click Uploader</title>
  <style>
    :root {
      --bg: #0c0f14; --card:#171b29; --border:#22293a; --txt:#e7eaf0; --muted:#a3aec2;
      --pri:#2563eb; --sec:#2b3446; --ok:#10b981; --err:#ef4444; --radius:12px; --gap:12px;
    }
    *{box-sizing:border-box}
    body {
      margin: 0; background: linear-gradient(180deg, var(--bg), #0f1420 40%, #0b0f19);
      color: var(--txt);
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }
    .wrap { max-width: 980px; margin: 22px auto; padding: 0 20px; }
    .card { background: var(--card); border:1px solid var(--border); border-radius: var(--radius); box-shadow: 0 2px 12px rgba(0,0,0,.25); padding: 18px; margin-bottom: 16px; }
    h1 { margin: 0 0 10px; font-size: 22px; }
    h2 { margin: 18px 0 10px; font-size: 18px; }
    .muted { color: var(--muted); font-size: 13px; }

    .row { display: grid; gap: 12px; }
    .g2 { grid-template-columns: repeat(2, minmax(0,1fr)); }
    .g3 { grid-template-columns: repeat(3, minmax(0,1fr)); }
    @media (max-width: 860px){ .g2,.g3 { grid-template-columns: 1fr; } }

    label { display:block; font-weight: 600; font-size: 13px; margin-bottom: 6px; color: #cfe0ff; }
    input, select, textarea {
      width: 100%; padding: 10px 12px; border-radius: 10px; border: 1px solid var(--border);
      background: #0c1220; color: var(--txt); outline: none; font-size: 15.5px;
    }
    input:focus, select:focus, textarea:focus { border-color: #3a4a72; box-shadow: 0 0 0 3px rgba(58, 74, 114, .25); }
    code { background: #0b1220; border: 1px solid #132342; padding: 2px 6px; border-radius: 6px; }

    .actions { display:flex; gap: 10px; align-items: center; margin-top: 14px; }
    .btn { padding: 10px 14px; border-radius: 10px; border: 0; cursor: pointer; font-weight: 700; }
    .primary { background: var(--pri); color: #fff; }
    .secondary { background: var(--sec); color: #e7ecf7; }
    a { color: #93c5fd; text-decoration: none; }
    a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <div class="wrap">
    <form method="POST">
      <div class="card">
        <h1>{{ 'Edit' if account else 'New' }} YouTube Account</h1>
        <div class="row g3">
          <div>
            <label>Name</label>
            <input name="name" required value="{{ account.name if account else '' }}"/>
          </div>
          <div>
            <label>State Prefix</label>
            <input name="state_prefix" required placeholder="yt_main" value="{{ account.state_prefix if account else '' }}"/>
          </div>
          <div>
            <label>Type</label>
            <select name="type">
              <option value="video" {% if account and account.type=='video' %}selected{% endif %}>Standard Video</option>
              <option value="short" {% if account and account.type=='short' %}selected{% endif %}>Short</option>
            </select>
          </div>
        </div>
      </div>

      <div class="card">
        <h2>Content Sources</h2>
        <div class="row g2">
          <div>
            <label>Video Base URL <span class="muted">(files: <code>vid.mp4</code>, <code>vid (1).mp4</code>, …)</span></label>
            <input name="video_base_url" required value="{{ account.video_base_url if account else '' }}" placeholder="https://example.com/video-folder"/>
          </div>
          <div>
            <label>Thumbnail Base URL <span class="muted">(files: <code>thumb (1).jpg</code>, …)</span></label>
            <input name="thumbnail_base_url" value="{{ account.thumbnail_base_url if account else '' }}" placeholder="https://example.com/thumbs"/>
          </div>
          <div>
            <label>Title Lines URL <span class="muted">(one title per line)</span></label>
            <input name="title_url" value="{{ account.title_url if account else '' }}" placeholder="https://example.com/titles.txt"/>
          </div>
          <div>
            <label>Description Lines URL <span class="muted">(one description per line)</span></label>
            <input name="description_url" value="{{ account.description_url if account else '' }}" placeholder="https://example.com/descriptions.txt"/>
          </div>
          <div>
            <label>Tags Lines URL <span class="muted">(comma or space separated)</span></label>
            <input name="tags_url" value="{{ account.tags_url if account else '' }}" placeholder="https://example.com/tags.txt"/>
          </div>
        </div>
      </div>

      <div class="card">
        <h2>Google OAuth</h2>
        <p class="muted">
          Use a unique token file per account. Ensure your OAuth consent screen & Client ID are configured in Google Cloud with an authorized redirect URI like
          <code>http://127.0.0.1:5000/oauth2callback</code>.
        </p>
        <div class="row g2">
          <div>
            <label>Client Secrets JSON Path</label>
            <input name="client_secrets_file" required value="{{ account.client_secrets_file if account else '' }}" placeholder="secrets/client_secret.json"/>
          </div>
          <div>
            <label>Token File Path <span class="muted">(will be created)</span></label>
            <input name="token_file" required value="{{ account.token_file if account else '' }}" placeholder="tokens/yt_main.json"/>
          </div>
        </div>
      </div>

      <div class="card">
        <h2>Upload Options</h2>
        <div class="row g3">
          <div>
            <label>Privacy</label>
            <select name="privacy_status">
              <option value="private"  {% if account and account.privacy_status=='private'  %}selected{% endif %}>Private</option>
              <option value="unlisted" {% if account and account.privacy_status=='unlisted' %}selected{% endif %}>Unlisted</option>
              <option value="public"   {% if account and account.privacy_status=='public'   %}selected{% endif %}>Public</option>
            </select>
          </div>
          <div>
            <label>Category ID</label>
            <input name="category_id" value="{{ account.category_id if account else '22' }}" placeholder="22"/>
          </div>
          <div>
            <label>Default Language</label>
            <input name="default_language" value="{{ account.default_language if account else '' }}" placeholder="e.g. en, nl"/>
          </div>

          <div>
            <label>Playlist ID (optional)</label>
            <input name="playlist_id" value="{{ account.playlist_id if account else '' }}"/>
          </div>
          <div>
            <label>Schedule Publish At <span class="muted">(RFC3339)</span></label>
            <input name="schedule_publish_at" value="{{ account.schedule_publish_at if account else '' }}" placeholder="2025-08-30T06:30:00Z"/>
          </div>
          <div>
            <label>Made For Kids?</label>
            <select name="made_for_kids">
              <option value="false" {% if account and account.made_for_kids=='true' %}{% else %}selected{% endif %}>No</option>
              <option value="true"  {% if account and account.made_for_kids=='true' %}selected{% endif %}>Yes</option>
            </select>
          </div>

          <div>
            <label>Self-Declared MFK?</label>
            <select name="self_declared_mfk">
              <option value="false" {% if account and account.self_declared_mfk=='true' %}{% else %}selected{% endif %}>No</option>
              <option value="true"  {% if account and account.self_declared_mfk=='true' %}selected{% endif %}>Yes</option>
            </select>
          </div>
          <div>
            <label>Enable Comments?</label>
            <select name="enable_comments">
              <option value="true"  {% if not account or account.enable_comments!='false' %}selected{% endif %}>Yes</option>
              <option value="false" {% if account and account.enable_comments=='false' %}selected{% endif %}>No</option>
            </select>
          </div>
        </div>

        <div class="actions">
          <button type="submit" class="btn primary">Save</button>
          <a class="btn secondary" href="{{ url_for('index') }}">Cancel</a>
        </div>
      </div>
    </form>
  </div>
</body>
</html>
